<!DOCTYPE html>
<html>
<head>

    <title>Student Profile</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, shrink-to-fit=no">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="../css/Student profile test" rel="stylesheet" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!--לאייקונים-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">
    <link href="../css/MyStyle2.css" rel="stylesheet" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>-->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!--<script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>-->
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <!-- Optional: include a polyfill for ES6 Promises for IE11 and Android browser -->
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7.1.0/dist/promise.min.js"></script>

    <script src="../Scripts/ajaxCalls.js"></script>
    <script>
        $(document).ready(function () {
            localStorage.removeItem('whatFun');
            //document.getElementById("cotart").innerHTML = "שם סטודנט " + localStorage.getItem("FirstName") + localStorage.getItem("LastName");
            // once the document is ready we fetch a student from the server
            id=localStorage.getItem("StudentId")
            uri = "../api/StudentProfile?StudentId=" + id;
            ajaxCall("GET", uri, "", getSuccessDetails, error);
            ajaxCall("GET", "../api/lang?StudentId=" + id, "", getSuccessLang, error);
            ajaxCall("GET", "../api/jobsSendAndSave?StudentId=" + id, "", getSuccessjob, error);
        });
        function getSuccessDetails(studentdata) {
            data = studentdata;
            console.log(data);
            str ='<div class="row">';
            str+='<div class="col-md-6">';
            str += '<label>' + data[0].FirstName + " " + data[0].LastName + '</label>';
            str += '</div>';
            str += '<div class="col-md-6">';
            str += '<p>שם מלא</p>';
            str += '</div>';
            str += '</div>';
            str += '<div class="row">';
            str += '<div class="col-md-6">';
            str += '<label>'+data[0].CellPhone+'</label>';
            str += '</div>';
            str += '<div class="col-md-6">';
            str += '<p>טלפון</p>';
            str += '</div>';
            str += '</div>';
            str += '<div class="row">';
            str += '<div class="col-md-6">';
            str += '<label>'+ data[0].Email +'</label>';
            str += '</div>';
            str += '<div class="col-md-6">';
            str += '<p>דואל</p>';
            str += '</div>';
            str += '</div>';
            str += '<div class="row">';
            str += '<div class="col-md-6">';
            str += '<label>'+ data[0].Gender+'</label>';
            str += '</div>';
            str += '<div class="col-md-6">';
            str += '<p>מגדר</p>';
            str += '</div>';
            str += '</div>';
            document.getElementById("details").innerHTML= str;
        }
        function getSuccessLang(langugedata) {
            dataLang = langugedata;
            str = "";
            if (dataLang == null) {
                document.getElementById("lang").innerHTML = "לא הוכנסו שפות ידועות";
            } else {
                for (var i = 0; i <dataLang.length; i++) {
                     str +='<div class="row">';
            str += '<div class="col-md-4">';
            if (dataLang[i].Degree == 0) {
                str += '<label>רמה נמוכה</label>';
            }
            else if (dataLang[i].Degree == 1) {
                str += '<label>רמה בינונית</label>';
            }
            else {
                str += '<label>רמה גבוהה</label>';
            }
            str += '</div>';
            str += '<div class="col-md-4">';
            str += '<label>' + dataLang[i].Name + '</label>';
            str += '</div>';
              str += '<div class="col-md-4">';
            str += '<p>'+(i+1)+'שפה </p>';
            str += '</div>';
            str += '</div>';
                }
            }
               document.getElementById("lang").innerHTML= str;
        }
        function getSuccessjob(jobdata) {
            data = jobdata;
            str = "";
            console.log(data);
            str += '<table>';
            str += '<tr>';
            str += '<th>קוד משרה</th>';
            str += '<th>שם משרה</th>';
            str += '<th>כמות מתעניינים</th>';
            str += '<th>קטגוריית משרה</th>';
            str += '<th>סטטוס משרה</th>';
             str += '<th>סטטוס סטודנט למשרה</th>';
            str += '</tr>';
            for (var i = 0; i < data.length; i++) { 
                str += '<tr>';
                str += '<td>'+ data[i].JobNo+'</td>';
                str += '<td>'+data[i].JobName+'</td>';
                str += '<td>'+data[i].AmountSend+'</td>';
                str += '<td>'+data[i].CategoryName+'</td>';
                str += '<td>'+data[i].Status+'</td>';
                str += '<td>'+data[i].StatusForStudent+'</td>';
                str += '</tr>';
            }
            str += '</table>';
            document.getElementById("Job").innerHTML= str;
        }
        function error(err) {
            err = JSON.parse(err.responseText);
            Swal.fire({
                type: 'error',
                title: 'שגיאה ',
                text: 'משהו לא עובד',
                footer: err.ExceptionMessage
            })
        }
    </script>


</head>
<body>
    <nav class="navbar fixed-top navbar-expand-lg navbar-light " style="background-color:#F2F2F0;">
        <a class="navbar-brand" href="#">  <img src="images/logoWeJob.png" width="130" height="35" class="d-inline-block align-top" alt=""></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-end " id="navbarTogglerDemo02">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        הגדרות מערכת
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="HistoryJobsDeleted.html">ארכיון משרות</a>
                        <a class="dropdown-item" href="#">מחלקות</a>
                        <a class="dropdown-item" href="#">שפות</a>
                        <a class="dropdown-item" href="#">כישורים</a>
                        <a class="dropdown-item" href="#">קטגוריות</a>
                        <a class="dropdown-item" href="#">תתי קטגוריות</a>

                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link " href="report1.html">דוחות</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ListOfWorkShop.html">סדנאות</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ListOfJobDistributors.html">מעסיקים ומשרות</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ListOfStudentAndGraduates.html">מועמדים</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="HomePage1.html">דף הבית</a>
                </li>

            </ul>
        </div>
    </nav>

    <!------ Include the above in your HEAD tag ---------->
    <div class="container emp-profile">
        <div class="card text-center">
            <div class="card-header" style="color:#072247">
                <div class="col-xs-12">
                    <a href="ListOfStudentAndGraduates.html" class="btn btn-light btn-lg " style="float:right">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                    </a>   
                </div>

            </div>
            <div class="card-body col-xs-12">
                <form method="post">
                    <div class="row">
                        <!--טאבים-->
                        <div class="col-md-8">
                            <div class="profile-head ">
                                <ul class="nav nav-tabs" id="myTab" role="tablist">                              
                                    <li class="nav-item">
                                        <a class="nav-link" id="lang-tab" data-toggle="tab" href="#Job" role="tab" aria-controls="profile" aria-selected="false">משרות</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="lang-tab" data-toggle="tab" href="#lang" role="tab" aria-controls="profile" aria-selected="false">שפות ידועות</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="skils-tab" data-toggle="tab" href="#skils" role="tab" aria-controls="profile" aria-selected="false">כישורים</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="interst-tab" data-toggle="tab" href="#interst" role="tab" aria-controls="profile" aria-selected="false">תחומי עניין</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" id="details-tab" data-toggle="tab" href="#details" role="tab" aria-controls="home" aria-selected="true">פרטים אישיים</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!--תמונה-->
                        <div class="col-md-4">
                            <div class="profile-img" id="profileImg">
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52y5aInsxSm31CvHOFHWujqUx_wWTS9iM6s7BAm21oEN_RiGoog" alt="" />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="tab-content profile-tab" id="myTabContent">
                                <!--טאב ראשון- פרטים אישיים-->
                                <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="home-tab" style="margin-left:80px;margin-top:-80px">

                                </div>
                                <!--טאב שני- שפות-->
                                <div class="tab-pane fade" id="lang" role="tabpanel" aria-labelledby="profile-tab" style="margin-left:80px;margin-top:-80px">

                                </div>
                                <!--טאב שלישי- כישורים -->
                                <div class="tab-pane fade" id="skils" role="tabpanel" aria-labelledby="profile-tab" style="margin-left:80px;margin-top:-80px">

                                </div>
                                <!--טאב רביעי-תחומי עניין-->
                                <div class="tab-pane fade" id="interst" role="tabpanel" aria-labelledby="profile-tab" style="margin-left:80px;margin-top:-80px">

                                </div>
                                <!-- טאב רביעי-משרות שאהב ושלח להם קורות חיים-->
                                <div class="tab-pane fade" id="Job" role="tabpanel" aria-labelledby="profile-tab" style="margin-left:80px;margin-top:-80px">

                                </div>
                               
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="profile-work">

                            </div>
                        </div>
                    </div>
                </form>
                <div class="card-footer text-muted">
                    <img src="images/logoWeJob.png" width="130" height="35" class="d-inline-block align-top" alt="">
                </div>
            </div>
        </div>
    </div>
</body>
</html>